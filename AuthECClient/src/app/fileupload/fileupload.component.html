<!-- upload-media.component.html -->
<div class="text-center mb-4">
    <div class="mx-auto mb-3" style="width: 4rem; height: 4rem; background: linear-gradient(90deg,#0d6efd,#6f42c1); border-radius: 50%;">
      <i class="fas fa-cloud-upload-alt text-white fs-2 d-flex align-items-center justify-content-center" style="height:100%;"></i>
    </div>

  </div>
  
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <form [formGroup]="uploadForm" (ngSubmit)="onSubmit()">
        <div class="mb-3">
          <label for="fileUpload" class="form-label">Choose files or drag and drop</label>
          <input 
            type="file" 
            class="form-control" 
            id="fileUpload"
            (change)="onFileSelected($event)"
          />
          <small class="form-text text-muted">Support for Audios or Videos</small>
        </div>
        <div class="mt-3">
          <label for="privacyToggle" class="form-label fw-semibold">Privacy Setting</label>
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" id="privacyToggle" formControlName="isPublic">
            <label class="form-check-label" for="privacyToggle">
              {{ uploadForm.get('isPublic')?.value ?  'Private (Only you can access)' :  'Public (Visible to everyone)' }}
            </label>
            
          </div>
        </div>
        <button 
          type="submit" 
          class="mt-3 btn"
          [ngClass]="{
            'btn-primary': selectedFile,
            '.btn-primary:disabled': !selectedFile
          }"
          [disabled]="!selectedFile"
        >
          Upload
        </button>
      </form>
      
  
      <div *ngIf="uploadProgress" class="mt-3">
        <div class="progress">
          <div 
            class="progress-bar progress-bar-striped progress-bar-animated" 
            role="progressbar"
            [style.width.%]="uploadProgress"
            aria-valuemin="0" 
            aria-valuemax="100"
          >
            {{ uploadProgress }}%
          </div>
        </div>
      </div>

      <div *ngIf="validationError" class="alert alert-danger mt-2">
        {{ validationError }}
      </div>



          <!-- Backend Conversion Progress -->
    <div *ngIf="conversionProgress !== null" class="mt-4">
      <label class="form-label fw-bold">Backend Processing Progress: {{ conversionProgress }}%</label>
      <div class="progress">
        <div class="progress-bar progress-bar-striped bg-warning" role="progressbar"
            [style.width.%]="conversionProgress" [attr.aria-valuenow]="conversionProgress"
            aria-valuemin="0" aria-valuemax="100">
        </div>
      </div>
    </div>

    
      <!-- Toggle Logs Button -->
      <div class="mt-4">
        <button class="btn btn-outline-secondary" (click)="toggleLogs()">
          <i class="bi bi-terminal me-2"></i> {{ showLogs ? 'Hide Logs' : 'Show Live Logs' }}
        </button>
      </div>

      <!-- Logs Panel -->
      <div *ngIf="showLogs" id="logBox" class="mt-3 border rounded bg-light p-3"
          style="max-height: 250px; overflow-y: auto;">
        <h6 class="mb-3 text-muted">Live Tenant Logs</h6>
        <pre *ngFor="let log of tenantLogs" class="mb-2 text-dark small">
          <div><strong>üïí Time:</strong> {{ log.timestamp }}</div>
          <div><strong>üìå Level:</strong> {{ log.level }}</div>
          <div><strong>üìù Message:</strong> {{ log.message }}</div>
          <div *ngIf="log.exception"><strong>‚ùó Exception:</strong> {{ log.exception }}</div>
          <div><strong>üè∑Ô∏è Tenant ID:</strong> {{ log.tenantId }}</div>
          <hr />
        </pre>
      </div>
  
      <div *ngIf="conversionProgress == 100" class="alert alert-success mt-3">
        ‚úÖ Upload Success!
        <pre class="mt-2 mb-0">{{ uploadResponse | json }}</pre>
      </div>
    </div>
  </div>
  